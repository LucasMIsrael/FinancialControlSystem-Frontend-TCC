<div class="login-container">
    <form [formGroup]="loginForm" (ngSubmit)="login()" class="login-form">
        <h2 class="welcome-message">Bem-vindo!</h2>

        <label>Email</label>
        <input type="email" formControlName="email" />
        <div *ngIf="email?.touched && email?.invalid" class="error">
            <span *ngIf="email?.errors?.['required']">Email é obrigatório.</span>
            <span *ngIf="email?.errors?.['email']">Insira um email válido.</span>
        </div>

        <label>Senha</label>
        <input type="password" formControlName="password" />
        <div *ngIf="password?.touched && password?.invalid" class="error">
            Senha é obrigatória.
        </div>

        <p class="forgot-password" routerLink="/change-password">
            Esqueci minha senha
        </p>

        <div *ngIf="backendError" class="message-box error-message">
            {{ backendError }}
            <button class="close-btn" (click)="closeError()">×</button>
        </div>

        <button type="submit" [disabled]="isLoading">
            {{ isLoading ? 'Entrando...' : 'Entrar' }}
        </button>

        <p class="register-link">
            Não tem uma conta? <a routerLink="/register">Cadastre-se!</a>
        </p>
    </form>

    <div *ngIf="isLoading" class="loading-overlay">
        <div class="spinner"></div>
        <p>Entrando...</p>
    </div>
</div>